<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="version" content="4.0.0-dev" />
    <meta name="last-updated" content="2025-11-29" />
    <title>Getting Started - Couchbase Query Analyzer v4.0.0</title>
    <meta name="description" content="Step-by-step guide to set up the Couchbase Query Analyzer with AI-powered insights. Connect to Couchbase and configure OpenAI or xAI Grok.">
    <link rel="icon" type="image/svg+xml" href="assets/img/favicon.svg">
    <link rel="stylesheet" href="assets/css/main.css">
    <style>
        /* Page-specific styles for getting_started.html - Compact layout */
        html{scroll-behavior:smooth}
        header {
            padding: 12px 20px;
        }
        header h1 {
            font-size: 2em;
            margin-bottom: 4px;
        }
        header p {
            margin: 4px 0 0 0;
            opacity: 0.95;
        }
        
        h2 {
            margin-top: 15px;
            margin-bottom: 8px;
        }
        
        h3 {
            margin-top: 12px;
            margin-bottom: 6px;
        }
        
        section {
            margin-bottom: 15px;
        }

        /* Icon row needs margin on this page */
        .icon-row {
            margin: 6px 0;
        }

        .download-options, .connect-options {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-top: 10px;
        }
        
        /* Compact tabs */
        .tab-content {
            padding: 12px 15px;
        }
        
        .steps-list {
            margin: 8px 0;
            padding-left: 20px;
        }
        
        .steps-list li {
            margin-bottom: 4px;
        }
        
        pre {
            margin: 8px 0;
            padding: 10px;
        }
        
        .sql-query-box {
            margin: 8px 0;
        }
        
        .sql-query-box pre {
            padding: 8px 10px;
        }

        /* Layout with sidebar */
        .layout{display:flex;gap:16px}
        .content{flex:1}
        @media (max-width:800px){
            .layout{flex-direction:column}
            .progress-sidebar{position:static;width:auto}
        }

        /* Progress Sidebar */
        .progress-sidebar {
            width: 140px;
            position: sticky;
            top: 10px;
            align-self: flex-start;
            padding: 15px 10px;
        }
        
        .progress-stepper {
            display: flex;
            flex-direction: column;
            gap: 0;
        }
        
        .progress-step {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            position: relative;
        }
        
        .step-indicator {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .step-circle {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #e0e0e0;
            color: #666;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 14px;
            transition: all 0.3s ease;
            cursor: pointer;
            border: 2px solid transparent;
        }
        
        .step-circle:hover {
            border-color: #007acc;
        }
        
        .step-line {
            width: 3px;
            height: 40px;
            background: #e0e0e0;
            transition: background 0.3s ease;
        }
        
        .progress-step:last-child .step-line {
            display: none;
        }
        
        .step-label {
            font-size: 11px;
            color: #666;
            padding-top: 6px;
            line-height: 1.2;
            max-width: 80px;
            transition: color 0.3s ease;
        }
        
        /* Active/Completed states */
        .progress-step.completed .step-circle {
            background: #28a745;
            color: white;
        }
        
        .progress-step.completed .step-line {
            background: #28a745;
        }
        
        .progress-step.completed .step-label {
            color: #28a745;
            font-weight: 600;
        }
        
        .progress-step.active .step-circle {
            background: #007acc;
            color: white;
            box-shadow: 0 0 0 4px rgba(0,122,204,0.2);
        }
        
        .progress-step.active .step-label {
            color: #007acc;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <div class="floating-github">
        <a href="https://github.com/Fujio-Turner/cb_completed_request" target="_blank" rel="noopener noreferrer">
            <img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub repository">
        </a>
        <div class="copyright">¬© 2025 fuj.io</div>
    </div>

    <header>
        <h1>Getting Started</h1>
        <p>Set up the Couchbase Query Analyzer with AI-powered analysis</p>
    </header>

    <div class="layout">
        <!-- Progress Sidebar -->
        <aside class="progress-sidebar">
            <a href="index.html" style="display:block;margin-bottom:15px;font-size:12px;color:#007acc">‚Üê Back to Home</a>
            <div class="progress-stepper">
                <div class="progress-step active" data-step="1">
                    <div class="step-indicator">
                        <a href="#step-1" class="step-circle">1</a>
                        <div class="step-line"></div>
                    </div>
                    <span class="step-label">Get the Tool</span>
                </div>
                <div class="progress-step" data-step="2">
                    <div class="step-indicator">
                        <a href="#step-2" class="step-circle">2</a>
                        <div class="step-line"></div>
                    </div>
                    <span class="step-label">Connect to Couchbase</span>
                </div>
                <div class="progress-step" data-step="3">
                    <div class="step-indicator">
                        <a href="#step-3" class="step-circle">3</a>
                        <div class="step-line"></div>
                    </div>
                    <span class="step-label">Configure Tool</span>
                </div>
                <div class="progress-step" data-step="4">
                    <div class="step-indicator">
                        <a href="#step-4" class="step-circle">4</a>
                        <div class="step-line"></div>
                    </div>
                    <span class="step-label">Setup AI</span>
                </div>
                <div class="progress-step" data-step="5">
                    <div class="step-indicator">
                        <a href="#step-5" class="step-circle">‚úì</a>
                    </div>
                    <span class="step-label">Ready!</span>
                </div>
            </div>
        </aside>

        <main class="content">
        <section id="step-1">
            <h2>1. Get the Tool</h2>
            <p>You can run the tool using Docker or by downloading an executable.</p>

            <div class="tabs-container">
                <div class="tab-buttons">
                    <button class="tab-btn active" onclick="switchTab('docker', event)">üê≥ Docker</button>
                    <button class="tab-btn" onclick="switchTab('macos', event)">üçé macOS</button>
                    <button class="tab-btn" onclick="switchTab('windows', event)">ü™ü Windows</button>
                </div>

                <div id="tab-docker" class="tab-content active">
                    <div class="icon-row">
                        <span class="icon-wrapper"><img src="assets/img/docker_hub_logo_round.png" alt="Docker"></span>
                        <a href="https://hub.docker.com/r/fujioturner/couchbase-query-analyzer/tags" target="_blank">Pull from Docker Hub</a>
                    </div>
<pre>docker pull fujioturner/couchbase-query-analyzer:latest
docker run -p 5000:5000 fujioturner/couchbase-query-analyzer:latest</pre>
                    <p style="margin-top:8px;color:#666;font-size:0.9em"><em>After running, open <a href="http://localhost:5000" target="_blank">http://localhost:5000</a></em></p>
                </div>

                <div id="tab-macos" class="tab-content">
                    <div class="icon-row">
                        <span class="icon-wrapper"><img src="assets/img/macOS_logo.png" alt="macOS"></span>
                        <a href="https://github.com/Fujio-Turner/cb_completed_request/releases" target="_blank">Download for macOS</a>
                    </div>
                    <ol class="steps-list">
                        <li>Download <code>cb_query_analyzer_macos</code>, make executable: <code>chmod +x</code>, then run.</li>
                        <li><em>Security warning? Go to System Settings > Privacy & Security to allow.</em></li>
                    </ol>
                    <p style="margin-top:6px;color:#666;font-size:0.9em"><em>Open <a href="http://localhost:5000" target="_blank">http://localhost:5000</a></em></p>
                </div>

                <div id="tab-windows" class="tab-content">
                    <div class="icon-row">
                        <span class="icon-wrapper"><img src="assets/img/ms_windows_logo.png" alt="Windows"></span>
                        <a href="https://github.com/Fujio-Turner/cb_completed_request/releases" target="_blank">Download for Windows</a>
                    </div>
                    <ol class="steps-list">
                        <li>Download <code>cb_query_analyzer.exe</code> and double-click to run.</li>
                        <li><em>"Windows protected your PC"? Click "More info" ‚Üí "Run anyway".</em></li>
                    </ol>
                    <p style="margin-top:6px;color:#666;font-size:0.9em"><em>Open <a href="http://localhost:5000" target="_blank">http://localhost:5000</a></em></p>
                </div>
            </div>
        </section>

        <section id="step-2">
            <h2>2. Connect to Couchbase</h2>
            <p style="margin-bottom:8px">Connect to a Couchbase cluster to save analysis data and preferences.</p>

            <div class="tabs-container">
                <div class="tab-buttons">
                    <button class="tab-btn active" onclick="switchTab('capella', event)">‚òÅÔ∏è Capella</button>
                    <button class="tab-btn" onclick="switchTab('selfhosted', event)">üñ•Ô∏è Self-Hosted</button>
                </div>

                <div id="tab-capella" class="tab-content active">
                    <div class="icon-row">
                        <span class="icon-wrapper"><img src="assets/img/couchbase_capella_logo.png" alt="Capella"></span>
                        <a href="https://cloud.couchbase.com/sign-up" target="_blank">Free Tier</a>
                        <span style="color:#999;margin:0 6px;">or</span>
                        <a href="https://cloud.couchbase.com/sign-in" target="_blank">Sign In</a>
                    </div>
                    <ol class="steps-list">
                        <li><strong>Create Bucket:</strong> <code>cb_tools</code> (256 MB)</li>
                        <li><strong>Create Scope/Collection:</strong> <code>query.analyzer</code></li>
                        <li><strong>Create Index:</strong>
                            <div class="sql-query-box">
                                <pre>CREATE INDEX `analysis_old_table_v2` 
ON `cb_tools`.`query`.`analyzer`(
    `createdAt` DESC INCLUDE MISSING, `metadata`, `status`,
    `prompt`, `provider`, `sourceCluster`, `parseJson`.`filters`
) WHERE (`docType` = "ai_analysis")</pre>
                                <button class="sql-copy-btn">Copy</button>
                            </div>
                        </li>
                        <li><strong>Create User:</strong> <a href="https://docs.couchbase.com/cloud/clusters/manage-database-users.html" target="_blank">Database Credential</a> with Read/Write on <code>cb_tools</code></li>
                        <li><strong>Whitelist IP:</strong> <a href="https://docs.couchbase.com/cloud/get-started/connect.html#prerequisites" target="_blank">Add IP to Allowed List</a></li>
                    </ol>
                </div>

                <div id="tab-selfhosted" class="tab-content">
                    <div class="icon-row">
                        <span class="icon-wrapper"><img src="assets/img/couchbase_logo.png" alt="Couchbase"></span>
                        <span><strong>Localhost</strong> or <strong>Remote Cluster</strong></span>
                    </div>
                    <ol class="steps-list">
                        <li><strong>Create Bucket:</strong> <code>cb_tools</code> (256 MB)</li>
                        <li><strong>Create Scope/Collection:</strong> <code>query.analyzer</code></li>
                        <li><strong>Create Index:</strong>
                            <div class="sql-query-box">
                                <pre>CREATE INDEX `analysis_old_table_v2` 
ON `cb_tools`.`query`.`analyzer`(
    `createdAt` DESC INCLUDE MISSING, `metadata`, `status`,
    `prompt`, `provider`, `sourceCluster`, `parseJson`.`filters`
) WHERE (`docType` = "ai_analysis")</pre>
                                <button class="sql-copy-btn">Copy</button>
                            </div>
                        </li>
                        <li><strong>Create User:</strong> <a href="https://docs.couchbase.com/server/current/manage/manage-security/manage-users-and-roles.html#add-a-user" target="_blank">SDK User</a> with Data Reader/Writer on <code>cb_tools</code></li>
                    </ol>
                </div>
            </div>
        </section>

        <section id="step-3">
            <h2>3. Configure the Tool</h2>
            <p style="margin-bottom:8px">Once running and your Couchbase user is ready:</p>
            <ol class="steps-list">
                <li>Open <a href="http://localhost:5000" target="_blank">http://localhost:5000</a></li>
                <li>Click <strong>Settings</strong> icon (Upper Right Corner) <img src="assets/img/setting_socket.png" alt="Settings icon" class="icon-zoom" style="height:20px;vertical-align:middle"> ‚Üí enter Cluster URL, Username, Password <img src="assets/img/setting_page.png" alt="Settings page - click to enlarge" class="screenshot-preview" style="height:40px;vertical-align:middle;margin-left:8px"></li>
                <li>Click <strong>Test Connection</strong> ‚Üí <strong>Save Settings</strong></li>
            </ol>
        </section>

        <section id="step-4">
            <h2>4. Setup AI Analysis</h2>
            <p style="margin-bottom:8px">Get an API Key from xAI Grok or OpenAI for AI-powered query analysis.</p>

            <table class="ai-table" style="font-size:0.9em">
                <thead>
                    <tr>
                        <th style="width:50%;padding:8px">
                            <img src="assets/img/x_ai_logo.png" alt="xAI" style="height:20px;vertical-align:middle;margin-right:6px">
                            Grok x.ai <em>(recommended)</em>
                        </th>
                        <th style="width:50%;padding:8px">
                            <img src="assets/img/openAid_logo.png" alt="OpenAI" style="height:20px;vertical-align:middle;margin-right:6px">
                            OpenAI
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td style="padding:8px"><a href="https://accounts.x.ai/sign-in?redirect=docs" target="_blank">Sign Up</a> ‚Üí <a href="https://console.x.ai/" target="_blank">Get API Key</a></td>
                        <td style="padding:8px"><a href="https://platform.openai.com/signup" target="_blank">Sign Up</a> ‚Üí <a href="https://platform.openai.com/api-keys" target="_blank">Get API Key</a></td>
                    </tr>
                    <tr>
                        <td colspan="2" style="padding:8px">In Settings Icon <img src="assets/img/setting_socket.png" alt="Settings icon" class="icon-zoom" style="height:18px;vertical-align:middle">, select provider tab, paste API Key, click <strong>Save</strong>. <img src="assets/img/setting_ai_api_page.png" alt="AI API settings - click to enlarge" class="screenshot-preview" style="height:40px;vertical-align:middle;margin-left:8px"></td>
                    </tr>
                </tbody>
            </table>
        </section>
        <h2>Ready</h2>
        <div id="step-5" class="success-box" style="padding:20px 24px;margin:20px 0;text-align:center">
            <h3 style="margin:0 0 10px">üéâ Ready to Analyze!</h3>
            <p style="margin:0 0 15px">You can now perform AI-powered analysis of your slow queries.</p>
            <a href="user_guide.html" class="cta-button" style="display:inline-block;background:#007acc;color:white;padding:12px 28px;border-radius:6px;text-decoration:none;font-weight:600;font-size:1.1em">Start Analyzing ‚Üí User Guide</a>
        </div>
    </main>
    </div><!-- end layout -->

    <div class="version-info">Couchbase Query Analyzer v4.0.0-dev</div>

    <script src="assets/js/main.js"></script>
    <script>
        // Progress stepper scroll spy
        document.addEventListener('DOMContentLoaded', () => {
            const steps = document.querySelectorAll('.progress-step');
            const sections = ['step-1', 'step-2', 'step-3', 'step-4', 'step-5'].map(id => document.getElementById(id));
            
            const updateProgress = () => {
                const scrollY = window.scrollY;
                const viewportMid = scrollY + window.innerHeight * 0.3;
                const atBottom = (window.innerHeight + scrollY) >= document.body.offsetHeight - 50;
                
                let activeIndex = 0;
                
                // If at bottom of page, activate last step
                if (atBottom) {
                    activeIndex = sections.length - 1;
                } else {
                    sections.forEach((section, index) => {
                        if (section) {
                            const top = section.getBoundingClientRect().top + scrollY;
                            if (top <= viewportMid) {
                                activeIndex = index;
                            }
                        }
                    });
                }
                
                steps.forEach((step, index) => {
                    step.classList.remove('active', 'completed');
                    if (index < activeIndex) {
                        step.classList.add('completed');
                    } else if (index === activeIndex) {
                        step.classList.add('active');
                    }
                });
            };
            
            updateProgress();
            let ticking = false;
            window.addEventListener('scroll', () => {
                if (!ticking) {
                    requestAnimationFrame(() => {
                        updateProgress();
                        ticking = false;
                    });
                    ticking = true;
                }
            }, { passive: true });
        });
    </script>

    <footer>
        <p>&copy; 2025 <a href="https://fuj.io" target="_blank" rel="noopener noreferrer">fuj.io</a>.</p>
    </footer>
</body>
</html>
